<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ethereum Specification &mdash; Ethereum Specification  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/dropdown.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/js/toggle_diffs.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Ethereum Virtual Machine (EVM)" href="../vm/index.html" />
    <link rel="prev" title="Ethereum Virtual Machine (EVM) Environmental Instructions" href="../vm/instructions/environment/index.html" /> 
</head>

<body class="wy-body-for-nav">
<div id="disclaimer">
    The documentation tools are undergoing heavy development and may introduce
    subtle bugs while rendering, especially in hard fork comparisons. Until this
    warning is removed, <em>always</em> double check against the
    <a href="https://github.com/ethereum/execution-specs/">original source</a>.
</div>


<nav class="menu">
    <button id="diff-toggle">Only Show Diffs</button>
</nav>


 

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> Ethereum Specification
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/index.html">Specification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../autoapi/ethereum/index.html">Ethereum</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/frontier/index.html">Ethereum Frontier Hardfork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/homestead/index.html">Ethereum Homestead Hardfork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/dao_fork/index.html">Ethereum Dao Hardfork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/tangerine_whistle/index.html">Ethereum Tangerine Whistle Hardfork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/spurious_dragon/index.html">Ethereum Spurious Dragon Hardfork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/byzantium/index.html">Ethereum Byzantium Hardfork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/constantinople/index.html">Ethereum Constantinople Hardfork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/istanbul/index.html">Ethereum Istanbul Hardfork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/muir_glacier/index.html">Ethereum Muir Glacier Hardfork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/berlin/index.html">Ethereum Berlin Hardfork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/crypto/index.html">Cryptographic Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/utils/index.html">Utility Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/base_types/index.html">Numeric &amp; Array Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/ethash/index.html">Ethash Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/exceptions/index.html">Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/ethereum/rlp/index.html">Recursive Length Prefix (RLP) Encoding</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Comparisons:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Comparisons</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../frontier_homestead.html">Frontier → Homestead</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../frontier_homestead/genesis/index.html">Genesis Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontier_homestead/eth_types/index.html">Ethereum Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontier_homestead/spec/index.html">Ethereum Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontier_homestead/vm/index.html">Ethereum Virtual Machine (EVM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontier_homestead/bloom/index.html">Ethereum Logs Bloom</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontier_homestead/vm/interpreter/index.html">Ethereum Virtual Machine (EVM) Interpreter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontier_homestead/trie/index.html">State Trie</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontier_homestead/utils/message/index.html">Hardfork Utility Functions For The Message Data-structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontier_homestead/vm/instructions/index.html">EVM Instruction Encoding (Opcodes)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontier_homestead/vm/instructions/system/index.html">Ethereum Virtual Machine (EVM) System Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontier_homestead/index.html">Ethereum <span class="change-replaced">Frontier</span><span class="change-replacement">Homestead</span> Hardfork</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../homestead_dao_fork.html">Homestead → Dao Fork</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../homestead_dao_fork/dao/index.html">Dao Fork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../homestead_dao_fork/utils/index.html">Hardfork Utility Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../homestead_dao_fork/spec/index.html">Ethereum Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../homestead_dao_fork/bloom/index.html">Ethereum Logs Bloom</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../homestead_dao_fork/utils/message/index.html">Hardfork Utility Functions For The Message Data-structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../homestead_dao_fork/utils/address/index.html">Hardfork Utility Functions For Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../homestead_dao_fork/index.html">Ethereum <span class="change-replaced">Homestead</span><span class="change-replacement">Dao</span> Hardfork</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../dao_fork_tangerine_whistle.html">Dao Fork → Tangerine Whistle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dao_fork_tangerine_whistle/dao/index.html">Dao Fork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dao_fork_tangerine_whistle/utils/index.html">Hardfork Utility Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dao_fork_tangerine_whistle/spec/index.html">Ethereum Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dao_fork_tangerine_whistle/utils/hexadecimal/index.html">Utility Functions For Hexadecimal Strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dao_fork_tangerine_whistle/utils/message/index.html">Hardfork Utility Functions For The Message Data-structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dao_fork_tangerine_whistle/utils/address/index.html">Hardfork Utility Functions For Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dao_fork_tangerine_whistle/vm/gas/index.html">Ethereum Virtual Machine (EVM) Gas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dao_fork_tangerine_whistle/vm/instructions/system/index.html">Ethereum Virtual Machine (EVM) System Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dao_fork_tangerine_whistle/index.html">Ethereum <span class="change-replaced">Dao</span><span class="change-replacement">Tangerine Whistle</span> Hardfork</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tangerine_whistle_spurious_dragon.html">Tangerine Whistle → Spurious Dragon</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tangerine_whistle_spurious_dragon/utils/index.html">Hardfork Utility Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tangerine_whistle_spurious_dragon/spec/index.html">Ethereum Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tangerine_whistle_spurious_dragon/state/index.html">State</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tangerine_whistle_spurious_dragon/vm/interpreter/index.html">Ethereum Virtual Machine (EVM) Interpreter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tangerine_whistle_spurious_dragon/vm/index.html">Ethereum Virtual Machine (EVM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tangerine_whistle_spurious_dragon/utils/address/index.html">Hardfork Utility Functions For Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tangerine_whistle_spurious_dragon/vm/gas/index.html">Ethereum Virtual Machine (EVM) Gas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tangerine_whistle_spurious_dragon/vm/instructions/system/index.html">Ethereum Virtual Machine (EVM) System Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tangerine_whistle_spurious_dragon/utils/message/index.html">Hardfork Utility Functions For The Message Data-structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tangerine_whistle_spurious_dragon/index.html">Ethereum <span class="change-replaced">Tangerine Whistle</span><span class="change-replacement">Spurious Dragon</span> Hardfork</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../spurious_dragon_byzantium.html">Spurious Dragon → Byzantium</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/exceptions/index.html">Ethereum Virtual Machine (EVM) Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/eth_types/index.html">Ethereum Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/precompiled_contracts/mapping/index.html">Precompiled Contract Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/utils/index.html">Hardfork Utility Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/spec/index.html">Ethereum Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/instructions/environment/index.html">Ethereum Virtual Machine (EVM) Environmental Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/instructions/storage/index.html">Ethereum Virtual Machine (EVM) Storage Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/interpreter/index.html">Ethereum Virtual Machine (EVM) Interpreter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/instructions/log/index.html">Ethereum Virtual Machine (EVM) Logging Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/index.html">Ethereum Virtual Machine (EVM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/utils/message/index.html">Hardfork Utility Functions For The Message Data-structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/precompiled_contracts/modexp/index.html">Ethereum Virtual Machine (EVM) MODEXP PRECOMPILED CONTRACT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/instructions/index.html">EVM Instruction Encoding (Opcodes)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/utils/address/index.html">Hardfork Utility Functions For Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/gas/index.html">Ethereum Virtual Machine (EVM) Gas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/instructions/system/index.html">Ethereum Virtual Machine (EVM) System Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/precompiled_contracts/alt_bn128/index.html">Ethereum Virtual Machine (EVM) ALT_BN128 CONTRACTS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/vm/precompiled_contracts/index.html">Precompiled Contract Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spurious_dragon_byzantium/index.html">Ethereum <span class="change-replaced">Spurious Dragon</span><span class="change-replacement">Byzantium</span> Hardfork</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../byzantium_constantinople.html">Byzantium → Constantinople</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../byzantium_constantinople/spec/index.html">Ethereum Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../byzantium_constantinople/vm/instructions/environment/index.html">Ethereum Virtual Machine (EVM) Environmental Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../byzantium_constantinople/vm/instructions/bitwise/index.html">Ethereum Virtual Machine (EVM) Bitwise Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../byzantium_constantinople/vm/interpreter/index.html">Ethereum Virtual Machine (EVM) Interpreter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../byzantium_constantinople/vm/precompiled_contracts/modexp/index.html">Ethereum Virtual Machine (EVM) MODEXP PRECOMPILED CONTRACT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../byzantium_constantinople/vm/instructions/index.html">EVM Instruction Encoding (Opcodes)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../byzantium_constantinople/utils/address/index.html">Hardfork Utility Functions For Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../byzantium_constantinople/vm/gas/index.html">Ethereum Virtual Machine (EVM) Gas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../byzantium_constantinople/vm/instructions/system/index.html">Ethereum Virtual Machine (EVM) System Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../byzantium_constantinople/index.html">Ethereum <span class="change-replaced">Byzantium</span><span class="change-replacement">Constantinople</span> Hardfork</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../constantinople_istanbul.html">Constantinople → Istanbul</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/vm/exceptions/index.html">Ethereum Virtual Machine (EVM) Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/vm/instructions/environment/index.html">Ethereum Virtual Machine (EVM) Environmental Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/spec/index.html">Ethereum Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/vm/index.html">Ethereum Virtual Machine (EVM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/vm/precompiled_contracts/mapping/index.html">Precompiled Contract Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/vm/instructions/storage/index.html">Ethereum Virtual Machine (EVM) Storage Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/utils/address/index.html">Hardfork Utility Functions For Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/vm/instructions/index.html">EVM Instruction Encoding (Opcodes)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/vm/precompiled_contracts/alt_bn128/index.html">Ethereum Virtual Machine (EVM) ALT_BN128 CONTRACTS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/eth_types/index.html">Ethereum Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/vm/interpreter/index.html">Ethereum Virtual Machine (EVM) Interpreter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/state/index.html">State</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/vm/precompiled_contracts/blake2f/index.html">Ethereum Virtual Machine (EVM) Blake2 PRECOMPILED CONTRACT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/vm/gas/index.html">Ethereum Virtual Machine (EVM) Gas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/vm/instructions/block/index.html">Ethereum Virtual Machine (EVM) Block Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/vm/precompiled_contracts/index.html">Precompiled Contract Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../constantinople_istanbul/index.html">Ethereum <span class="change-replaced">Constantinople</span><span class="change-replacement">Istanbul</span> Hardfork</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../istanbul_muir_glacier.html">Istanbul → Muir Glacier</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../istanbul_muir_glacier/spec/index.html">Ethereum Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../istanbul_muir_glacier/index.html">Ethereum <span class="change-replaced">Istanbul</span><span class="change-replacement">Muir Glacier</span> Hardfork</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../../muir_glacier_berlin.html">Muir Glacier → Berlin</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../vm/instructions/environment/index.html">Ethereum Virtual Machine (EVM) Environmental Instructions</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Ethereum Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/index.html">Ethereum Virtual Machine (EVM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/instructions/storage/index.html">Ethereum Virtual Machine (EVM) Storage Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/message/index.html"><span class="change-replaced">Hardfork</span><span class="change-replacement">Berlin</span> Utility Functions For The Message Data-structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/address/index.html"><span class="change-replaced">Hardfork</span><span class="change-replacement">Berlin</span> Utility Functions For Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trie/index.html">State Trie</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/instructions/system/index.html">Ethereum Virtual Machine (EVM) System Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/interpreter/index.html">Ethereum Virtual Machine (EVM) Interpreter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../eth_types/index.html">Ethereum Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html"><span class="change-replaced">Hardfork</span><span class="change-replacement">Berlin</span> Utility Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/gas/index.html">Ethereum Virtual Machine (EVM) Gas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/precompiled_contracts/modexp/index.html">Ethereum Virtual Machine (EVM) MODEXP PRECOMPILED CONTRACT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html">Ethereum <span class="change-replaced">Muir Glacier</span><span class="change-replacement">Berlin</span> Hardfork</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Ethereum Specification</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../index.html">Comparisons</a> &raquo;</li>
          <li><a href="../../muir_glacier_berlin.html">Muir Glacier → Berlin</a> &raquo;</li>
      <li>Ethereum Specification</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/diffs/muir_glacier_berlin/spec/index.pickle64.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <span class="target" id="module-ethereum.muir_glacier.spec"></span><section id="ethereum-specification">
<h1>Ethereum Specification<a class="headerlink" href="#ethereum-specification" title="Permalink to this headline"></a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id1">Introduction</a></p></li>
<li><p><a class="reference internal" href="#module-contents" id="id2">Module Contents</a></p>
<ul>
<li><p><a class="reference internal" href="#classes" id="id3">Classes</a></p></li>
<li><p><a class="reference internal" href="#functions" id="id4">Functions</a></p></li>
<li><p><a class="reference internal" href="#attributes" id="id5">Attributes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-details" id="id6">Module Details</a></p>
<ul>
<li><p><a class="reference internal" href="#block-reward" id="id7">BLOCK_REWARD</a></p></li>
<li><p><a class="reference internal" href="#gas-limit-adjustment-factor" id="id8">GAS_LIMIT_ADJUSTMENT_FACTOR</a></p></li>
<li><p><a class="reference internal" href="#gas-limit-minimum" id="id9">GAS_LIMIT_MINIMUM</a></p></li>
<li><p><a class="reference internal" href="#genesis-difficulty" id="id10">GENESIS_DIFFICULTY</a></p></li>
<li><p><a class="reference internal" href="#max-ommer-depth" id="id11">MAX_OMMER_DEPTH</a></p></li>
<li><p><a class="reference internal" href="#bomb-delay-blocks" id="id12">BOMB_DELAY_BLOCKS</a></p></li>
<li><p><a class="reference internal" href="#empty-ommer-hash" id="id13">EMPTY_OMMER_HASH</a></p></li>
<li><p><a class="reference internal" href="#blockchain" id="id14">BlockChain</a></p></li>
<li><p><a class="reference internal" href="#apply-fork" id="id15">apply_fork</a></p></li>
<li><p><a class="reference internal" href="#get-last-256-block-hashes" id="id16">get_last_256_block_hashes</a></p></li>
<li><p><a class="reference internal" href="#state-transition" id="id17">state_transition</a></p></li>
<li><p><a class="reference internal" href="#validate-header" id="id18">validate_header</a></p></li>
<li><p><a class="reference internal" href="#generate-header-hash-for-pow" id="id19">generate_header_hash_for_pow</a></p></li>
<li><p><a class="reference internal" href="#validate-proof-of-work" id="id20">validate_proof_of_work</a></p></li>
<li><p><a class="reference internal" href="#apply-body" id="id21">apply_body</a></p></li>
<li><p><a class="reference internal" href="#validate-ommers" id="id22">validate_ommers</a></p></li>
<li><p><a class="reference internal" href="#pay-rewards" id="id23">pay_rewards</a></p></li>
<li><p><a class="reference internal" href="#process-transaction" id="id24">process_transaction</a></p></li>
<li><p><a class="reference internal" href="#validate-transaction" id="id25">validate_transaction</a></p></li>
<li><p><a class="reference internal" href="#calculate-intrinsic-cost" id="id26">calculate_intrinsic_cost</a></p></li>
<li><p><a class="reference internal" href="#recover-sender" id="id27">recover_sender</a></p></li>
<li><p><a class="reference internal" href="#signing-hash-pre155" id="id28">signing_hash_pre155</a></p></li>
<li><p><a class="reference internal" href="#signing-hash-155" id="id29">signing_hash_155</a></p></li>
<li class="change-added"><p><a class="reference internal" href="#signing-hash-2930" id="id30">signing_hash_2930</a></p></li>
<li><p><a class="reference internal" href="#compute-header-hash" id="id30">compute_header_hash</a></p></li>
<li><p><a class="reference internal" href="#check-gas-limit" id="id31">check_gas_limit</a></p></li>
<li><p><a class="reference internal" href="#calculate-block-difficulty" id="id32">calculate_block_difficulty</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline"></a></h2>
<p>Entry point for the Ethereum specification.</p>
</section>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline"></a></h2>
<section id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline"></a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.BlockChain" title="ethereum.muir_glacier.spec.BlockChain"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BlockChain</span></code></a></p></td>
<td><p>History and current state of the block chain.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline"></a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.apply_fork" title="ethereum.muir_glacier.spec.apply_fork"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_fork</span></code></a></p></td>
<td><p>Transforms the state from the previous hard fork (<cite>old</cite>) into the block</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.get_last_256_block_hashes" title="ethereum.muir_glacier.spec.get_last_256_block_hashes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_last_256_block_hashes</span></code></a></p></td>
<td><p>Obtain the list of hashes of the previous 256 blocks in order of increasing</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.state_transition" title="ethereum.muir_glacier.spec.state_transition"><code class="xref py py-obj docutils literal notranslate"><span class="pre">state_transition</span></code></a></p></td>
<td><p>Attempts to apply a block to an existing block chain.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.validate_header" title="ethereum.muir_glacier.spec.validate_header"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_header</span></code></a></p></td>
<td><p>Verifies a block header.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.generate_header_hash_for_pow" title="ethereum.muir_glacier.spec.generate_header_hash_for_pow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">generate_header_hash_for_pow</span></code></a></p></td>
<td><p>Generate rlp hash of the header which is to be used for Proof-of-Work</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.validate_proof_of_work" title="ethereum.muir_glacier.spec.validate_proof_of_work"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_proof_of_work</span></code></a></p></td>
<td><p>Validates the Proof of Work constraints.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.apply_body" title="ethereum.muir_glacier.spec.apply_body"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_body</span></code></a></p></td>
<td><p>Executes a block.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.validate_ommers" title="ethereum.muir_glacier.spec.validate_ommers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_ommers</span></code></a></p></td>
<td><p>Validates the ommers mentioned in the block.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.pay_rewards" title="ethereum.muir_glacier.spec.pay_rewards"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pay_rewards</span></code></a></p></td>
<td><p>Pay rewards to the block miner as well as the ommers miners.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.process_transaction" title="ethereum.muir_glacier.spec.process_transaction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">process_transaction</span></code></a></p></td>
<td><p>Execute a transaction against the provided environment.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.validate_transaction" title="ethereum.muir_glacier.spec.validate_transaction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_transaction</span></code></a></p></td>
<td><p>Verifies a transaction.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.calculate_intrinsic_cost" title="ethereum.muir_glacier.spec.calculate_intrinsic_cost"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_intrinsic_cost</span></code></a></p></td>
<td><p>Calculates the intrinsic cost of the transaction that is charged before</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.recover_sender" title="ethereum.muir_glacier.spec.recover_sender"><code class="xref py py-obj docutils literal notranslate"><span class="pre">recover_sender</span></code></a></p></td>
<td><p>Extracts the sender address from a transaction.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.signing_hash_pre155" title="ethereum.muir_glacier.spec.signing_hash_pre155"><code class="xref py py-obj docutils literal notranslate"><span class="pre">signing_hash_pre155</span></code></a></p></td>
<td><p>Compute the hash of a transaction used in a legacy (pre EIP 155) signature.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.signing_hash_155" title="ethereum.muir_glacier.spec.signing_hash_155"><code class="xref py py-obj docutils literal notranslate"><span class="pre">signing_hash_155</span></code></a></p></td>
<td><p>Compute the hash of a transaction used in a EIP 155 signature.</p></td>
</tr>
<tr class="change-added row-even"><td><p><a class="reference internal" href="#ethereum.berlin.spec.signing_hash_2930" title="ethereum.berlin.spec.signing_hash_2930"><code class="xref py py-obj docutils literal notranslate"><span class="pre">signing_hash_2930</span></code></a></p></td>
<td><p>Compute the hash of a transaction used in a EIP 2930 signature.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.compute_header_hash" title="ethereum.muir_glacier.spec.compute_header_hash"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_header_hash</span></code></a></p></td>
<td><p>Computes the hash of a block header.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.check_gas_limit" title="ethereum.muir_glacier.spec.check_gas_limit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_gas_limit</span></code></a></p></td>
<td><p>Validates the gas limit for a block.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.calculate_block_difficulty" title="ethereum.muir_glacier.spec.calculate_block_difficulty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_block_difficulty</span></code></a></p></td>
<td><p>Computes difficulty of a block using its header and parent header.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline"></a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.BLOCK_REWARD" title="ethereum.muir_glacier.spec.BLOCK_REWARD"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BLOCK_REWARD</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.GAS_LIMIT_ADJUSTMENT_FACTOR" title="ethereum.muir_glacier.spec.GAS_LIMIT_ADJUSTMENT_FACTOR"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GAS_LIMIT_ADJUSTMENT_FACTOR</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.GAS_LIMIT_MINIMUM" title="ethereum.muir_glacier.spec.GAS_LIMIT_MINIMUM"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GAS_LIMIT_MINIMUM</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.GENESIS_DIFFICULTY" title="ethereum.muir_glacier.spec.GENESIS_DIFFICULTY"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GENESIS_DIFFICULTY</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.MAX_OMMER_DEPTH" title="ethereum.muir_glacier.spec.MAX_OMMER_DEPTH"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MAX_OMMER_DEPTH</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.BOMB_DELAY_BLOCKS" title="ethereum.muir_glacier.spec.BOMB_DELAY_BLOCKS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BOMB_DELAY_BLOCKS</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ethereum.muir_glacier.spec.EMPTY_OMMER_HASH" title="ethereum.muir_glacier.spec.EMPTY_OMMER_HASH"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EMPTY_OMMER_HASH</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="module-details">
<h2>Module Details<a class="headerlink" href="#module-details" title="Permalink to this headline"></a></h2>
<section id="block-reward">
<h3>BLOCK_REWARD<a class="headerlink" href="#block-reward" title="Permalink to this headline"></a></h3>
<dl class="py data">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.BLOCK_REWARD">
<span class="sig-name descname"><span class="pre">BLOCK_REWARD</span></span><a class="headerlink" href="#ethereum.muir_glacier.spec.BLOCK_REWARD" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">BLOCK_REWARD</span> <span class="o">=</span> <span class="n">U256</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">18</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="gas-limit-adjustment-factor">
<h3>GAS_LIMIT_ADJUSTMENT_FACTOR<a class="headerlink" href="#gas-limit-adjustment-factor" title="Permalink to this headline"></a></h3>
<dl class="py data">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.GAS_LIMIT_ADJUSTMENT_FACTOR">
<span class="sig-name descname"><span class="pre">GAS_LIMIT_ADJUSTMENT_FACTOR</span></span><a class="headerlink" href="#ethereum.muir_glacier.spec.GAS_LIMIT_ADJUSTMENT_FACTOR" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">GAS_LIMIT_ADJUSTMENT_FACTOR</span> <span class="o">=</span> <span class="mi">1024</span>
</pre></div>
</div>
</section>
<section id="gas-limit-minimum">
<h3>GAS_LIMIT_MINIMUM<a class="headerlink" href="#gas-limit-minimum" title="Permalink to this headline"></a></h3>
<dl class="py data">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.GAS_LIMIT_MINIMUM">
<span class="sig-name descname"><span class="pre">GAS_LIMIT_MINIMUM</span></span><a class="headerlink" href="#ethereum.muir_glacier.spec.GAS_LIMIT_MINIMUM" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">GAS_LIMIT_MINIMUM</span> <span class="o">=</span> <span class="mi">5000</span>
</pre></div>
</div>
</section>
<section id="genesis-difficulty">
<h3>GENESIS_DIFFICULTY<a class="headerlink" href="#genesis-difficulty" title="Permalink to this headline"></a></h3>
<dl class="py data">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.GENESIS_DIFFICULTY">
<span class="sig-name descname"><span class="pre">GENESIS_DIFFICULTY</span></span><a class="headerlink" href="#ethereum.muir_glacier.spec.GENESIS_DIFFICULTY" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">GENESIS_DIFFICULTY</span> <span class="o">=</span> <span class="n">Uint</span><span class="p">(</span><span class="mi">131072</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="max-ommer-depth">
<h3>MAX_OMMER_DEPTH<a class="headerlink" href="#max-ommer-depth" title="Permalink to this headline"></a></h3>
<dl class="py data">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.MAX_OMMER_DEPTH">
<span class="sig-name descname"><span class="pre">MAX_OMMER_DEPTH</span></span><a class="headerlink" href="#ethereum.muir_glacier.spec.MAX_OMMER_DEPTH" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MAX_OMMER_DEPTH</span> <span class="o">=</span> <span class="mi">6</span>
</pre></div>
</div>
</section>
<section id="bomb-delay-blocks">
<h3>BOMB_DELAY_BLOCKS<a class="headerlink" href="#bomb-delay-blocks" title="Permalink to this headline"></a></h3>
<dl class="py data">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.BOMB_DELAY_BLOCKS">
<span class="sig-name descname"><span class="pre">BOMB_DELAY_BLOCKS</span></span><a class="headerlink" href="#ethereum.muir_glacier.spec.BOMB_DELAY_BLOCKS" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">BOMB_DELAY_BLOCKS</span> <span class="o">=</span> <span class="mi">9000000</span>
</pre></div>
</div>
</section>
<section id="empty-ommer-hash">
<h3>EMPTY_OMMER_HASH<a class="headerlink" href="#empty-ommer-hash" title="Permalink to this headline"></a></h3>
<dl class="py data">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.EMPTY_OMMER_HASH">
<span class="sig-name descname"><span class="pre">EMPTY_OMMER_HASH</span></span><a class="headerlink" href="#ethereum.muir_glacier.spec.EMPTY_OMMER_HASH" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">EMPTY_OMMER_HASH</span> <span class="o">=</span> <span class="n">keccak256</span><span class="p">(</span><span class="n">rlp</span><span class="o">.</span><span class="n">encode</span><span class="p">([]))</span>
</pre></div>
</div>
</section>
<section id="blockchain">
<h3>BlockChain<a class="headerlink" href="#blockchain" title="Permalink to this headline"></a></h3>
<p>History and current state of the block chain.</p>
<dl class="py class">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.BlockChain">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">BlockChain</span></span><a class="headerlink" href="#ethereum.muir_glacier.spec.BlockChain" title="Permalink to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.BlockChain.blocks">
<span class="sig-name descname"><span class="pre">blocks</span></span><em class="property"> <span class="change-replaced"><span class="pre">:List[ethereum.muir_glacier.eth_types.Block]</span></span><span class="change-replacement"><span class="pre">:List[ethereum.berlin.eth_types.Block]</span></span></em><a class="headerlink" href="#ethereum.muir_glacier.spec.BlockChain.blocks" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.BlockChain.state">
<span class="sig-name descname"><span class="pre">state</span></span><em class="property"> <span class="change-replaced"><span class="pre">:ethereum.muir_glacier.state.State</span></span><span class="change-replacement"><span class="pre">:ethereum.berlin.state.State</span></span></em><a class="headerlink" href="#ethereum.muir_glacier.spec.BlockChain.state" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.BlockChain.chain_id">
<span class="sig-name descname"><span class="pre">chain_id</span></span><em class="property"> <span class="pre">:ethereum.base_types.Uint64</span></em><a class="headerlink" href="#ethereum.muir_glacier.spec.BlockChain.chain_id" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="apply-fork">
<h3>apply_fork<a class="headerlink" href="#apply-fork" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.apply_fork">
<span class="sig-name descname"><span class="pre">apply_fork</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.apply_fork" title="Permalink to this definition"></a></dt>
<dd><p>Transforms the state from the previous hard fork (<cite>old</cite>) into the block
chain object for this hard fork and returns it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>old</strong> – Previous block chain object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>new</strong> – Upgraded block chain object for this hard fork.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>BlockChain</cite></p>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">apply_fork</span><span class="p">(</span><span class="n">old</span><span class="p">:</span> <span class="n">BlockChain</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BlockChain</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">old</span>
</pre></div>
</div>
</section>
<section id="get-last-256-block-hashes">
<h3>get_last_256_block_hashes<a class="headerlink" href="#get-last-256-block-hashes" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.get_last_256_block_hashes">
<span class="sig-name descname"><span class="pre">get_last_256_block_hashes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chain</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.get_last_256_block_hashes" title="Permalink to this definition"></a></dt>
<dd><p>Obtain the list of hashes of the previous 256 blocks in order of increasing
block number.</p>
<p>This function will return less hashes for the first 256 blocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>chain</strong> – History and current state.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>recent_block_hashes</strong> – Hashes of the recent 256 blocks in order of increasing block number.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>List[Hash32]</cite></p>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_last_256_block_hashes</span><span class="p">(</span><span class="n">chain</span><span class="p">:</span> <span class="n">BlockChain</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Hash32</span><span class="p">]:</span>
    <span class="n">recent_blocks</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="o">-</span><span class="mi">255</span><span class="p">:]</span>
    <span class="c1"># TODO: This function has not been tested rigorously</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">recent_blocks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="n">recent_block_hashes</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">recent_blocks</span><span class="p">:</span>
        <span class="n">prev_block_hash</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">parent_hash</span>
        <span class="n">recent_block_hashes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prev_block_hash</span><span class="p">)</span>

    <span class="c1"># We are computing the hash only for the most recent block and not for</span>
    <span class="c1"># the rest of the blocks as they have successors which have the hash of</span>
    <span class="c1"># the current block as parent hash.</span>
    <span class="n">most_recent_block_hash</span> <span class="o">=</span> <span class="n">keccak256</span><span class="p">(</span><span class="n">rlp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">recent_blocks</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">header</span><span class="p">))</span>
    <span class="n">recent_block_hashes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">most_recent_block_hash</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">recent_block_hashes</span>
</pre></div>
</div>
</section>
<section id="state-transition">
<h3>state_transition<a class="headerlink" href="#state-transition" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.state_transition">
<span class="sig-name descname"><span class="pre">state_transition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.state_transition" title="Permalink to this definition"></a></dt>
<dd><p>Attempts to apply a block to an existing block chain.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>chain</strong> – History and current state.</p></li>
<li><p><strong>block</strong> – Block to apply to <cite>chain</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">state_transition</span><span class="p">(</span><span class="n">chain</span><span class="p">:</span> <span class="n">BlockChain</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="n">Block</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">parent_header</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">header</span>
    <span class="n">validate_header</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="p">,</span> <span class="n">parent_header</span><span class="p">)</span>
    <span class="n">validate_ommers</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">ommers</span><span class="p">,</span> <span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="p">,</span> <span class="n">chain</span><span class="p">)</span>
    <span class="p">(</span>
        <span class="n">gas_used</span><span class="p">,</span>
        <span class="n">transactions_root</span><span class="p">,</span>
        <span class="n">receipt_root</span><span class="p">,</span>
        <span class="n">block_logs_bloom</span><span class="p">,</span>
        <span class="n">state</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">=</span> <span class="n">apply_body</span><span class="p">(</span>
        <span class="n">chain</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
        <span class="n">get_last_256_block_hashes</span><span class="p">(</span><span class="n">chain</span><span class="p">),</span>
        <span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">coinbase</span><span class="p">,</span>
        <span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>
        <span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span>
        <span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">difficulty</span><span class="p">,</span>
        <span class="n">block</span><span class="o">.</span><span class="n">transactions</span><span class="p">,</span>
        <span class="n">block</span><span class="o">.</span><span class="n">ommers</span><span class="p">,</span>
        <span class="n">chain</span><span class="o">.</span><span class="n">chain_id</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ensure</span><span class="p">(</span><span class="n">gas_used</span> <span class="o">==</span> <span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">gas_used</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>
    <span class="n">ensure</span><span class="p">(</span><span class="n">transactions_root</span> <span class="o">==</span> <span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">transactions_root</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>
    <span class="n">ensure</span><span class="p">(</span><span class="n">state_root</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="o">==</span> <span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">state_root</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>
    <span class="n">ensure</span><span class="p">(</span><span class="n">receipt_root</span> <span class="o">==</span> <span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">receipt_root</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>
    <span class="n">ensure</span><span class="p">(</span><span class="n">block_logs_bloom</span> <span class="o">==</span> <span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">bloom</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>

    <span class="n">chain</span><span class="o">.</span><span class="n">blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">blocks</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">255</span><span class="p">:</span>
        <span class="c1"># Real clients have to store more blocks to deal with reorgs, but the</span>
        <span class="c1"># protocol only requires the last 255</span>
        <span class="n">chain</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="o">-</span><span class="mi">255</span><span class="p">:]</span>
</pre></div>
</div>
</section>
<section id="validate-header">
<h3>validate_header<a class="headerlink" href="#validate-header" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.validate_header">
<span class="sig-name descname"><span class="pre">validate_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_header</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.validate_header" title="Permalink to this definition"></a></dt>
<dd><p>Verifies a block header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>header</strong> – Header to check for correctness.</p></li>
<li><p><strong>parent_header</strong> – Parent Header of the header to check for correctness</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">validate_header</span><span class="p">(</span><span class="n">header</span><span class="p">:</span> <span class="n">Header</span><span class="p">,</span> <span class="n">parent_header</span><span class="p">:</span> <span class="n">Header</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">parent_has_ommers</span> <span class="o">=</span> <span class="n">parent_header</span><span class="o">.</span><span class="n">ommers_hash</span> <span class="o">!=</span> <span class="n">EMPTY_OMMER_HASH</span>
    <span class="n">ensure</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&gt;</span> <span class="n">parent_header</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>
    <span class="n">ensure</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">number</span> <span class="o">==</span> <span class="n">parent_header</span><span class="o">.</span><span class="n">number</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>
    <span class="n">ensure</span><span class="p">(</span>
        <span class="n">check_gas_limit</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">gas_limit</span><span class="p">,</span> <span class="n">parent_header</span><span class="o">.</span><span class="n">gas_limit</span><span class="p">),</span>
        <span class="n">InvalidBlock</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ensure</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">extra_data</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">32</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>

    <span class="n">block_difficulty</span> <span class="o">=</span> <span class="n">calculate_block_difficulty</span><span class="p">(</span>
        <span class="n">header</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span>
        <span class="n">parent_header</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span>
        <span class="n">parent_header</span><span class="o">.</span><span class="n">difficulty</span><span class="p">,</span>
        <span class="n">parent_has_ommers</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ensure</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">difficulty</span> <span class="o">==</span> <span class="n">block_difficulty</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>

    <span class="n">block_parent_hash</span> <span class="o">=</span> <span class="n">keccak256</span><span class="p">(</span><span class="n">rlp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">parent_header</span><span class="p">))</span>
    <span class="n">ensure</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">parent_hash</span> <span class="o">==</span> <span class="n">block_parent_hash</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>

    <span class="n">validate_proof_of_work</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="generate-header-hash-for-pow">
<h3>generate_header_hash_for_pow<a class="headerlink" href="#generate-header-hash-for-pow" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.generate_header_hash_for_pow">
<span class="sig-name descname"><span class="pre">generate_header_hash_for_pow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.generate_header_hash_for_pow" title="Permalink to this definition"></a></dt>
<dd><p>Generate rlp hash of the header which is to be used for Proof-of-Work
verification. This hash is generated with the following header fields:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>parent_hash</cite></p></li>
<li><p><cite>ommers_hash</cite></p></li>
<li><p><cite>coinbase</cite></p></li>
<li><p><cite>state_root</cite></p></li>
<li><p><cite>transactions_root</cite></p></li>
<li><p><cite>receipt_root</cite></p></li>
<li><p><cite>bloom</cite></p></li>
<li><p><cite>difficulty</cite></p></li>
<li><p><cite>number</cite></p></li>
<li><p><cite>gas_limit</cite></p></li>
<li><p><cite>gas_used</cite></p></li>
<li><p><cite>timestamp</cite></p></li>
<li><p><cite>extra_data</cite></p></li>
</ul>
</div></blockquote>
<p>In other words, the PoW artefacts <cite>mix_digest</cite> and <cite>nonce</cite> are ignored
while calculating this hash.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>header</strong> – The header object for which the hash is to be generated.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>hash</strong> – The PoW valid rlp hash of the passed in header.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>Hash32</cite></p>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generate_header_hash_for_pow</span><span class="p">(</span><span class="n">header</span><span class="p">:</span> <span class="n">Header</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hash32</span><span class="p">:</span>
    <span class="n">header_data_without_pow_artefacts</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">header</span><span class="o">.</span><span class="n">parent_hash</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">ommers_hash</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">coinbase</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">state_root</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">transactions_root</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">receipt_root</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">bloom</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">difficulty</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">gas_used</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span>
        <span class="n">header</span><span class="o">.</span><span class="n">extra_data</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">rlp</span><span class="o">.</span><span class="n">rlp_hash</span><span class="p">(</span><span class="n">header_data_without_pow_artefacts</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="validate-proof-of-work">
<h3>validate_proof_of_work<a class="headerlink" href="#validate-proof-of-work" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.validate_proof_of_work">
<span class="sig-name descname"><span class="pre">validate_proof_of_work</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.validate_proof_of_work" title="Permalink to this definition"></a></dt>
<dd><p>Validates the Proof of Work constraints.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>header</strong> – Header of interest.</p>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">validate_proof_of_work</span><span class="p">(</span><span class="n">header</span><span class="p">:</span> <span class="n">Header</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">header_hash</span> <span class="o">=</span> <span class="n">generate_header_hash_for_pow</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
    <span class="c1"># TODO: Memoize this somewhere and read from that data instead of</span>
    <span class="c1"># calculating cache for every block validation.</span>
    <span class="n">cache</span> <span class="o">=</span> <span class="n">generate_cache</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>
    <span class="n">mix_digest</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="n">hashimoto_light</span><span class="p">(</span>
        <span class="n">header_hash</span><span class="p">,</span> <span class="n">header</span><span class="o">.</span><span class="n">nonce</span><span class="p">,</span> <span class="n">cache</span><span class="p">,</span> <span class="n">dataset_size</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">ensure</span><span class="p">(</span><span class="n">mix_digest</span> <span class="o">==</span> <span class="n">header</span><span class="o">.</span><span class="n">mix_digest</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>
    <span class="n">ensure</span><span class="p">(</span>
        <span class="n">Uint</span><span class="o">.</span><span class="n">from_be_bytes</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">U256_CEIL_VALUE</span> <span class="o">//</span> <span class="n">header</span><span class="o">.</span><span class="n">difficulty</span><span class="p">),</span>
        <span class="n">InvalidBlock</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="apply-body">
<h3>apply_body<a class="headerlink" href="#apply-body" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.apply_body">
<span class="sig-name descname"><span class="pre">apply_body</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_hashes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coinbase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_gas_limit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_difficulty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transactions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ommers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chain_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.apply_body" title="Permalink to this definition"></a></dt>
<dd><p>Executes a block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> – Current account state.</p></li>
<li><p><strong>block_hashes</strong> – List of hashes of the previous 256 blocks in the order of
increasing block number.</p></li>
<li><p><strong>coinbase</strong> – Address of account which receives block reward and transaction fees.</p></li>
<li><p><strong>block_number</strong> – Position of the block within the chain.</p></li>
<li><p><strong>block_gas_limit</strong> – Initial amount of gas available for execution in this block.</p></li>
<li><p><strong>block_time</strong> – Time the block was produced, measured in seconds since the epoch.</p></li>
<li><p><strong>block_difficulty</strong> – Difficulty of the block.</p></li>
<li><p><strong>transactions</strong> – Transactions included in the block.</p></li>
<li><p><strong>ommers</strong> – Headers of ancestor blocks which are not direct parents (formerly
uncles.)</p></li>
<li><p><strong>chain_id</strong> – ID of the executing chain.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>gas_available</strong> (<cite>eth1spec.base_types.Uint</cite>) – Remaining gas after all transactions have been executed.</p></li>
<li><p><strong>transactions_root</strong> (<cite>eth1spec.eth_types.Root</cite>) – Trie root of all the transactions in the block.</p></li>
<li><p><strong>receipt_root</strong> (<cite>eth1spec.eth_types.Root</cite>) – Trie root of all the receipts in the block.</p></li>
<li><p><strong>block_logs_bloom</strong> (<cite>Bloom</cite>) – Logs bloom of all the logs included in all the transactions of the
block.</p></li>
<li><p><strong>state</strong> (<cite>eth1spec.eth_types.State</cite>) – State after all transactions have been executed.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<pre class="literal-block">def apply_body(
    state: State,
    block_hashes: List[Hash32],
    coinbase: Address,
    block_number: Uint,
    block_gas_limit: Uint,
    block_time: U256,
    block_difficulty: Uint,
    transactions: <span class="change-replaced">Tuple[Transaction,</span><span class="change-replacement">Tuple[Union[LegacyTransaction, Bytes],</span> ...],
    ommers: Tuple[Header, ...],
    chain_id: Uint64,
) -&gt; Tuple[Uint, Root, Root, Bloom, State]:
    gas_available = block_gas_limit
    transactions_trie: <span class="change-added">Trie[
        Bytes, Optional[Union[Bytes, LegacyTransaction]]
    ] = Trie(secured=False, default=None)
    receipts_trie: </span>Trie[Bytes, <span class="change-replaced">Optional[Transaction]]</span><span class="change-replacement">Optional[Union[Bytes, Receipt]]]</span> = Trie(
        secured=False, default=None
    )<span class="change-removed">
    receipts_trie: Trie[Bytes, Optional[Receipt]] = Trie(
        secured=False, default=None
    )</span>
    block_logs: Tuple[Log, ...] = ()

    for i, tx in <span class="change-replaced">enumerate(transactions):
        trie_set(transactions_trie,</span><span class="change-replacement">enumerate(map(decode_transaction, transactions)):
        trie_set(
            transactions_trie,</span> rlp.encode(Uint(i)), <span class="change-added">encode_transaction(tx)
        )

        ensure(tx.gas &lt;= gas_available, InvalidBlock)
        sender_address = recover_sender(chain_id, </span>tx)

        <span class="change-replaced">ensure(tx.gas &lt;= gas_available, InvalidBlock)
        sender_address</span><span class="change-replacement">env</span> = <span class="change-replaced">recover_sender(chain_id,</span><span class="change-replacement">vm.Environment(
            caller=sender_address,
            origin=sender_address,
            block_hashes=block_hashes,
            coinbase=coinbase,
            number=block_number,
            gas_limit=block_gas_limit,
            gas_price=tx.gas_price,
            time=block_time,
            difficulty=block_difficulty,
            state=state,
            chain_id=chain_id,
        )

        gas_used, logs, has_erred = process_transaction(env,</span> tx)

        <span class="change-removed">env = vm.Environment(
            caller=sender_address,
            origin=sender_address,
            block_hashes=block_hashes,
            coinbase=coinbase,
            number=block_number,
            gas_limit=block_gas_limit,
            gas_price=tx.gas_price,
            time=block_time,
            difficulty=block_difficulty,
            state=state,
            chain_id=chain_id,
        )

        gas_used, logs, has_erred = process_transaction(env, tx)
        </span>gas_available -= gas_used

        <span class="change-added">receipt: Union[Bytes, Receipt] = Receipt(
            succeeded=not has_erred,
            cumulative_gas_used=(block_gas_limit - gas_available),
            bloom=logs_bloom(logs),
            logs=logs,
        )

        if isinstance(tx, AccessListTransaction):
            receipt = b&quot;\x01&quot; + rlp.encode(receipt)

        </span>trie_set(
            receipts_trie,
            rlp.encode(Uint(i)),
            <span class="change-replaced">Receipt(
                succeeded=not has_erred,
                cumulative_gas_used=(block_gas_limit</span><span class="change-replacement">receipt,
        )

        block_logs += logs

    pay_rewards(state, block_number, coinbase, ommers)

    gas_remaining = block_gas_limit</span> - <span class="change-removed">gas_available),
                bloom=logs_bloom(logs),
                logs=logs,
            ),
        )
        block_logs += logs

    pay_rewards(state, block_number, coinbase, ommers)

    gas_remaining = block_gas_limit - </span>gas_available

    block_logs_bloom = logs_bloom(block_logs)

    return (
        gas_remaining,
        root(transactions_trie),
        root(receipts_trie),
        block_logs_bloom,
        state,
    )
</pre>
</section>
<section id="validate-ommers">
<h3>validate_ommers<a class="headerlink" href="#validate-ommers" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.validate_ommers">
<span class="sig-name descname"><span class="pre">validate_ommers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ommers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chain</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.validate_ommers" title="Permalink to this definition"></a></dt>
<dd><p>Validates the ommers mentioned in the block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ommers</strong> – List of ommers mentioned in the current block.</p></li>
<li><p><strong>block_header</strong> – The header of current block.</p></li>
<li><p><strong>chain</strong> – History and current state.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">validate_ommers</span><span class="p">(</span>
    <span class="n">ommers</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Header</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">block_header</span><span class="p">:</span> <span class="n">Header</span><span class="p">,</span> <span class="n">chain</span><span class="p">:</span> <span class="n">BlockChain</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">block_hash</span> <span class="o">=</span> <span class="n">rlp</span><span class="o">.</span><span class="n">rlp_hash</span><span class="p">(</span><span class="n">block_header</span><span class="p">)</span>

    <span class="n">ensure</span><span class="p">(</span><span class="n">rlp</span><span class="o">.</span><span class="n">rlp_hash</span><span class="p">(</span><span class="n">ommers</span><span class="p">)</span> <span class="o">==</span> <span class="n">block_header</span><span class="o">.</span><span class="n">ommers_hash</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ommers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># Nothing to validate</span>
        <span class="k">return</span>

    <span class="c1"># Check that each ommer satisfies the constraints of a header</span>
    <span class="k">for</span> <span class="n">ommer</span> <span class="ow">in</span> <span class="n">ommers</span><span class="p">:</span>
        <span class="n">ensure</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">ommer</span><span class="o">.</span><span class="n">number</span> <span class="o">&lt;</span> <span class="n">block_header</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>
        <span class="n">ommer_parent_header</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span>
            <span class="o">-</span><span class="p">(</span><span class="n">block_header</span><span class="o">.</span><span class="n">number</span> <span class="o">-</span> <span class="n">ommer</span><span class="o">.</span><span class="n">number</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="p">]</span><span class="o">.</span><span class="n">header</span>
        <span class="n">validate_header</span><span class="p">(</span><span class="n">ommer</span><span class="p">,</span> <span class="n">ommer_parent_header</span><span class="p">)</span>

    <span class="c1"># Check that there can be only at most 2 ommers for a block.</span>
    <span class="n">ensure</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ommers</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>

    <span class="n">ommers_hashes</span> <span class="o">=</span> <span class="p">[</span><span class="n">rlp</span><span class="o">.</span><span class="n">rlp_hash</span><span class="p">(</span><span class="n">ommer</span><span class="p">)</span> <span class="k">for</span> <span class="n">ommer</span> <span class="ow">in</span> <span class="n">ommers</span><span class="p">]</span>
    <span class="c1"># Check that there are no duplicates in the ommers of current block</span>
    <span class="n">ensure</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ommers_hashes</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">ommers_hashes</span><span class="p">)),</span> <span class="n">InvalidBlock</span><span class="p">)</span>

    <span class="n">recent_canonical_blocks</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="o">-</span><span class="p">(</span><span class="n">MAX_OMMER_DEPTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">:]</span>
    <span class="n">recent_canonical_block_hashes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">rlp</span><span class="o">.</span><span class="n">rlp_hash</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">header</span><span class="p">)</span> <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">recent_canonical_blocks</span>
    <span class="p">}</span>
    <span class="n">recent_ommers_hashes</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">Hash32</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">recent_canonical_blocks</span><span class="p">:</span>
        <span class="n">recent_ommers_hashes</span> <span class="o">=</span> <span class="n">recent_ommers_hashes</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
            <span class="p">{</span><span class="n">rlp</span><span class="o">.</span><span class="n">rlp_hash</span><span class="p">(</span><span class="n">ommer</span><span class="p">)</span> <span class="k">for</span> <span class="n">ommer</span> <span class="ow">in</span> <span class="n">block</span><span class="o">.</span><span class="n">ommers</span><span class="p">}</span>
        <span class="p">)</span>

    <span class="k">for</span> <span class="n">ommer_index</span><span class="p">,</span> <span class="n">ommer</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ommers</span><span class="p">):</span>
        <span class="n">ommer_hash</span> <span class="o">=</span> <span class="n">ommers_hashes</span><span class="p">[</span><span class="n">ommer_index</span><span class="p">]</span>
        <span class="c1"># The current block shouldn&#39;t be the ommer</span>
        <span class="n">ensure</span><span class="p">(</span><span class="n">ommer_hash</span> <span class="o">!=</span> <span class="n">block_hash</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>

        <span class="c1"># Ommer shouldn&#39;t be one of the recent canonical blocks</span>
        <span class="n">ensure</span><span class="p">(</span><span class="n">ommer_hash</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">recent_canonical_block_hashes</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>

        <span class="c1"># Ommer shouldn&#39;t be one of the uncles mentioned in the recent</span>
        <span class="c1"># canonical blocks</span>
        <span class="n">ensure</span><span class="p">(</span><span class="n">ommer_hash</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">recent_ommers_hashes</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>

        <span class="c1"># Ommer age with respect to the current block. For example, an age of</span>
        <span class="c1"># 1 indicates that the ommer is a sibling of previous block.</span>
        <span class="n">ommer_age</span> <span class="o">=</span> <span class="n">block_header</span><span class="o">.</span><span class="n">number</span> <span class="o">-</span> <span class="n">ommer</span><span class="o">.</span><span class="n">number</span>
        <span class="n">ensure</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">ommer_age</span> <span class="o">&lt;=</span> <span class="n">MAX_OMMER_DEPTH</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>

        <span class="n">ensure</span><span class="p">(</span>
            <span class="n">ommer</span><span class="o">.</span><span class="n">parent_hash</span> <span class="ow">in</span> <span class="n">recent_canonical_block_hashes</span><span class="p">,</span> <span class="n">InvalidBlock</span>
        <span class="p">)</span>
        <span class="n">ensure</span><span class="p">(</span><span class="n">ommer</span><span class="o">.</span><span class="n">parent_hash</span> <span class="o">!=</span> <span class="n">block_header</span><span class="o">.</span><span class="n">parent_hash</span><span class="p">,</span> <span class="n">InvalidBlock</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pay-rewards">
<h3>pay_rewards<a class="headerlink" href="#pay-rewards" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.pay_rewards">
<span class="sig-name descname"><span class="pre">pay_rewards</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coinbase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ommers</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.pay_rewards" title="Permalink to this definition"></a></dt>
<dd><p>Pay rewards to the block miner as well as the ommers miners.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> – Current account state.</p></li>
<li><p><strong>block_number</strong> – Position of the block within the chain.</p></li>
<li><p><strong>coinbase</strong> – Address of account which receives block reward and transaction fees.</p></li>
<li><p><strong>ommers</strong> – List of ommers mentioned in the current block.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pay_rewards</span><span class="p">(</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">,</span>
    <span class="n">block_number</span><span class="p">:</span> <span class="n">Uint</span><span class="p">,</span>
    <span class="n">coinbase</span><span class="p">:</span> <span class="n">Address</span><span class="p">,</span>
    <span class="n">ommers</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Header</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">miner_reward</span> <span class="o">=</span> <span class="n">BLOCK_REWARD</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ommers</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">BLOCK_REWARD</span> <span class="o">//</span> <span class="mi">32</span><span class="p">))</span>
    <span class="n">create_ether</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">coinbase</span><span class="p">,</span> <span class="n">miner_reward</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">ommer</span> <span class="ow">in</span> <span class="n">ommers</span><span class="p">:</span>
        <span class="c1"># Ommer age with respect to the current block.</span>
        <span class="n">ommer_age</span> <span class="o">=</span> <span class="n">U256</span><span class="p">(</span><span class="n">block_number</span> <span class="o">-</span> <span class="n">ommer</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>
        <span class="n">ommer_miner_reward</span> <span class="o">=</span> <span class="p">((</span><span class="mi">8</span> <span class="o">-</span> <span class="n">ommer_age</span><span class="p">)</span> <span class="o">*</span> <span class="n">BLOCK_REWARD</span><span class="p">)</span> <span class="o">//</span> <span class="mi">8</span>
        <span class="n">create_ether</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">ommer</span><span class="o">.</span><span class="n">coinbase</span><span class="p">,</span> <span class="n">ommer_miner_reward</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="process-transaction">
<h3>process_transaction<a class="headerlink" href="#process-transaction" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.process_transaction">
<span class="sig-name descname"><span class="pre">process_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.process_transaction" title="Permalink to this definition"></a></dt>
<dd><p>Execute a transaction against the provided environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – Environment for the Ethereum Virtual Machine.</p></li>
<li><p><strong>tx</strong> – Transaction to execute.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>gas_left</strong> (<cite>eth1spec.base_types.U256</cite>) – Remaining gas after execution.</p></li>
<li><p><strong>logs</strong> (<cite>Tuple[eth1spec.eth_types.Log, …]</cite>) – Logs generated during execution.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<pre class="literal-block">def process_transaction(
    env: vm.Environment, tx: Transaction
) -&gt; Tuple[U256, Tuple[Log, ...], bool]:
    ensure(validate_transaction(tx), InvalidBlock)

    sender = env.origin
    sender_account = get_account(env.state, sender)
    gas_fee = tx.gas * tx.gas_price
    ensure(sender_account.nonce == tx.nonce, InvalidBlock)
    ensure(sender_account.balance &gt;= gas_fee, InvalidBlock)
    ensure(sender_account.code == bytearray(), InvalidBlock)

    gas = tx.gas - calculate_intrinsic_cost(tx)
    increment_nonce(env.state, sender)
    sender_balance_after_gas_fee = sender_account.balance - gas_fee
    set_account_balance(env.state, sender, sender_balance_after_gas_fee)

    <span class="change-added">preaccessed_addresses = set()
    preaccessed_storage_keys = set()
    if isinstance(tx, AccessListTransaction):
        for (address, keys) in tx.access_list:
            preaccessed_addresses.add(address)
            for key in keys:
                preaccessed_storage_keys.add((address, key))

    </span>message = prepare_message(
        sender,
        tx.to,
        tx.value,
        tx.data,
        gas,
        env,
    <span class="change-added">preaccessed_addresses=frozenset(preaccessed_addresses),
        preaccessed_storage_keys=frozenset(preaccessed_storage_keys),
    </span>)

    output = process_message_call(message, env)

    gas_used = tx.gas - output.gas_left
    gas_refund = min(gas_used // 2, output.refund_counter)
    gas_refund_amount = (output.gas_left + gas_refund) * tx.gas_price
    transaction_fee = (tx.gas - output.gas_left - gas_refund) * tx.gas_price
    total_gas_used = gas_used - gas_refund

    # refund gas
    sender_balance_after_refund = (
        get_account(env.state, sender).balance + gas_refund_amount
    )
    set_account_balance(env.state, sender, sender_balance_after_refund)

    # transfer miner fees
    coinbase_balance_after_mining_fee = (
        get_account(env.state, env.coinbase).balance + transaction_fee
    )
    set_account_balance(
        env.state, env.coinbase, coinbase_balance_after_mining_fee
    )

    for address in output.accounts_to_delete:
        destroy_account(env.state, address)

    for address in output.touched_accounts:
        should_delete = account_exists(
            env.state, address
        ) and is_account_empty(env.state, address)
        if should_delete:
            destroy_account(env.state, address)

    return total_gas_used, output.logs, output.has_erred
</pre>
</section>
<section id="validate-transaction">
<h3>validate_transaction<a class="headerlink" href="#validate-transaction" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.validate_transaction">
<span class="sig-name descname"><span class="pre">validate_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.validate_transaction" title="Permalink to this definition"></a></dt>
<dd><p>Verifies a transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tx</strong> – Transaction to validate.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>verified</strong> – True if the transaction can be executed, or False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>bool</cite></p>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">validate_transaction</span><span class="p">(</span><span class="n">tx</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">calculate_intrinsic_cost</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">tx</span><span class="o">.</span><span class="n">gas</span> <span class="ow">and</span> <span class="n">tx</span><span class="o">.</span><span class="n">nonce</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">**</span><span class="mi">64</span> <span class="o">-</span> <span class="mi">1</span>
</pre></div>
</div>
</section>
<section id="calculate-intrinsic-cost">
<h3>calculate_intrinsic_cost<a class="headerlink" href="#calculate-intrinsic-cost" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.calculate_intrinsic_cost">
<span class="sig-name descname"><span class="pre">calculate_intrinsic_cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.calculate_intrinsic_cost" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the intrinsic cost of the transaction that is charged before
execution is instantiated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tx</strong> – Transaction to compute the intrinsic cost of.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>verified</strong> – The intrinsic cost of the transaction.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>eth1spec.base_types.Uint</cite></p>
</dd>
</dl>
</dd></dl>

<pre class="literal-block">def calculate_intrinsic_cost(tx: Transaction) -&gt; Uint:
    data_cost = 0

    for byte in tx.data:
        if byte == 0:
            data_cost += TX_DATA_COST_PER_ZERO
        else:
            data_cost += TX_DATA_COST_PER_NON_ZERO

    if tx.to == Bytes0(b&quot;&quot;):
        create_cost = TX_CREATE_COST
    else:
        create_cost = 0

    <span class="change-added">access_list_cost = 0
    if isinstance(tx, AccessListTransaction):
        for (_address, keys) in tx.access_list:
            access_list_cost += TX_ACCESS_LIST_ADDRESS_COST
            access_list_cost += len(keys) * TX_ACCESS_LIST_STORAGE_KEY_COST

    </span>return Uint(TX_BASE_COST + data_cost + <span class="change-replaced">create_cost)</span><span class="change-replacement">create_cost + access_list_cost)</span>
</pre>
</section>
<section id="recover-sender">
<h3>recover_sender<a class="headerlink" href="#recover-sender" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.recover_sender">
<span class="sig-name descname"><span class="pre">recover_sender</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chain_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.recover_sender" title="Permalink to this definition"></a></dt>
<dd><p>Extracts the sender address from a transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx</strong> – Transaction of interest.</p></li>
<li><p><strong>chain_id</strong> – ID of the executing chain.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>sender</strong> – The address of the account that signed the transaction.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>eth1spec.eth_types.Address</cite></p>
</dd>
</dl>
</dd></dl>

<pre class="literal-block">def recover_sender(chain_id: Uint64, tx: Transaction) -&gt; Address:
    v, r, s = tx.v, tx.r, tx.s

    ensure(0 &lt; r and r &lt; SECP256K1N, InvalidBlock)
    ensure(0 &lt; s and s &lt;= SECP256K1N // 2, InvalidBlock)

    if <span class="change-added">isinstance(tx, LegacyTransaction):
        if </span>v == 27 or v == 28:
        public_key = <span class="change-added">secp256k1_recover(
                r, s, v - 27, signing_hash_pre155(tx)
            )
        else:
            ensure(
                v == 35 + chain_id * 2 or v == 36 + chain_id * 2, InvalidBlock
            )
            public_key = secp256k1_recover(
                r, s, v - 35 - chain_id * 2, signing_hash_155(tx)
            )
    elif isinstance(tx, AccessListTransaction):
        public_key = </span>secp256k1_recover(r, s, <span class="change-replaced">v - 27, signing_hash_pre155(tx))
    else:
        ensure(v == 35 + chain_id * 2 or v == 36 + chain_id * 2, InvalidBlock)
        public_key = secp256k1_recover(
            r, s, v - 35 - chain_id * 2, signing_hash_155(tx)
        )</span><span class="change-replacement">v, signing_hash_2930(tx))</span>
    return Address(keccak256(public_key)[12:32])
</pre>
</section>
<section id="signing-hash-pre155">
<h3>signing_hash_pre155<a class="headerlink" href="#signing-hash-pre155" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.signing_hash_pre155">
<span class="sig-name descname"><span class="pre">signing_hash_pre155</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.signing_hash_pre155" title="Permalink to this definition"></a></dt>
<dd><p>Compute the hash of a transaction used in a legacy (pre EIP 155) signature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tx</strong> – Transaction of interest.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>hash</strong> – Hash of the transaction.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>eth1spec.eth_types.Hash32</cite></p>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">signing_hash_pre155</span><span class="p">(</span><span class="n">tx</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hash32</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">keccak256</span><span class="p">(</span>
        <span class="n">rlp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">nonce</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">gas_price</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">gas</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">to</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="signing-hash-155">
<h3>signing_hash_155<a class="headerlink" href="#signing-hash-155" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.signing_hash_155">
<span class="sig-name descname"><span class="pre">signing_hash_155</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.signing_hash_155" title="Permalink to this definition"></a></dt>
<dd><p>Compute the hash of a transaction used in a EIP 155 signature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tx</strong> – Transaction of interest.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>hash</strong> – Hash of the transaction.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>eth1spec.eth_types.Hash32</cite></p>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">signing_hash_155</span><span class="p">(</span><span class="n">tx</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hash32</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">keccak256</span><span class="p">(</span>
        <span class="n">rlp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">nonce</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">gas_price</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">gas</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">to</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">Uint</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                <span class="n">Uint</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                <span class="n">Uint</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
<section class="change-added" id="signing-hash-2930">
<h3>signing_hash_2930<a class="headerlink" href="#signing-hash-2930" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.berlin.spec.signing_hash_2930">
<span class="sig-name descname"><span class="pre">signing_hash_2930</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.berlin.spec.signing_hash_2930" title="Permalink to this definition"></a></dt>
<dd><p>Compute the hash of a transaction used in a EIP 2930 signature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tx</strong> – Transaction of interest.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>hash</strong> – Hash of the transaction.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>eth1spec.eth_types.Hash32</cite></p>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">signing_hash_2930</span><span class="p">(</span><span class="n">tx</span><span class="p">:</span> <span class="n">AccessListTransaction</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hash32</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">keccak256</span><span class="p">(</span>
        <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x01</span><span class="s2">&quot;</span>
        <span class="o">+</span> <span class="n">rlp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">chain_id</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">nonce</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">gas_price</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">gas</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">to</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">access_list</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="compute-header-hash">
<h3>compute_header_hash<a class="headerlink" href="#compute-header-hash" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.compute_header_hash">
<span class="sig-name descname"><span class="pre">compute_header_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.compute_header_hash" title="Permalink to this definition"></a></dt>
<dd><p>Computes the hash of a block header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>header</strong> – Header of interest.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>hash</strong> – Hash of the header.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>ethereum.eth_types.Hash32</cite></p>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">compute_header_hash</span><span class="p">(</span><span class="n">header</span><span class="p">:</span> <span class="n">Header</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hash32</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">keccak256</span><span class="p">(</span><span class="n">rlp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">header</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="check-gas-limit">
<h3>check_gas_limit<a class="headerlink" href="#check-gas-limit" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.check_gas_limit">
<span class="sig-name descname"><span class="pre">check_gas_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gas_limit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_gas_limit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.check_gas_limit" title="Permalink to this definition"></a></dt>
<dd><p>Validates the gas limit for a block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gas_limit</strong> – Gas limit to validate.</p></li>
<li><p><strong>parent_gas_limit</strong> – Gas limit of the parent block.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>check</strong> – True if gas limit constraints are satisfied, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>bool</cite></p>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check_gas_limit</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">:</span> <span class="n">Uint</span><span class="p">,</span> <span class="n">parent_gas_limit</span><span class="p">:</span> <span class="n">Uint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="n">max_adjustment_delta</span> <span class="o">=</span> <span class="n">parent_gas_limit</span> <span class="o">//</span> <span class="n">GAS_LIMIT_ADJUSTMENT_FACTOR</span>
    <span class="k">if</span> <span class="n">gas_limit</span> <span class="o">&gt;=</span> <span class="n">parent_gas_limit</span> <span class="o">+</span> <span class="n">max_adjustment_delta</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">gas_limit</span> <span class="o">&lt;=</span> <span class="n">parent_gas_limit</span> <span class="o">-</span> <span class="n">max_adjustment_delta</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">gas_limit</span> <span class="o">&lt;</span> <span class="n">GAS_LIMIT_MINIMUM</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="calculate-block-difficulty">
<h3>calculate_block_difficulty<a class="headerlink" href="#calculate-block-difficulty" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="ethereum.muir_glacier.spec.calculate_block_difficulty">
<span class="sig-name descname"><span class="pre">calculate_block_difficulty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_difficulty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_has_ommers</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ethereum.muir_glacier.spec.calculate_block_difficulty" title="Permalink to this definition"></a></dt>
<dd><p>Computes difficulty of a block using its header and parent header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block_number</strong> – Block number of the block.</p></li>
<li><p><strong>block_timestamp</strong> – Timestamp of the block.</p></li>
<li><p><strong>parent_timestamp</strong> – Timestamp of the parent block.</p></li>
<li><p><strong>parent_difficulty</strong> – difficulty of the parent block.</p></li>
<li><p><strong>parent_has_ommers</strong> – does the parent have ommers.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>difficulty</strong> – Computed difficulty for a block.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>ethereum.base_types.Uint</cite></p>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calculate_block_difficulty</span><span class="p">(</span>
    <span class="n">block_number</span><span class="p">:</span> <span class="n">Uint</span><span class="p">,</span>
    <span class="n">block_timestamp</span><span class="p">:</span> <span class="n">U256</span><span class="p">,</span>
    <span class="n">parent_timestamp</span><span class="p">:</span> <span class="n">U256</span><span class="p">,</span>
    <span class="n">parent_difficulty</span><span class="p">:</span> <span class="n">Uint</span><span class="p">,</span>
    <span class="n">parent_has_ommers</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Uint</span><span class="p">:</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="p">(</span>
        <span class="nb">int</span><span class="p">(</span><span class="n">parent_difficulty</span><span class="p">)</span>
        <span class="o">//</span> <span class="mi">2048</span>
        <span class="o">*</span> <span class="nb">max</span><span class="p">(</span>
            <span class="p">(</span><span class="mi">2</span> <span class="k">if</span> <span class="n">parent_has_ommers</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)</span>
            <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">block_timestamp</span> <span class="o">-</span> <span class="n">parent_timestamp</span><span class="p">)</span> <span class="o">//</span> <span class="mi">9</span><span class="p">,</span>
            <span class="o">-</span><span class="mi">99</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">difficulty</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">parent_difficulty</span><span class="p">)</span> <span class="o">+</span> <span class="n">offset</span>
    <span class="c1"># Historical Note: The difficulty bomb was not present in Ethereum at the</span>
    <span class="c1"># start of Frontier, but was added shortly after launch. However since the</span>
    <span class="c1"># bomb has no effect prior to block 200000 we pretend it existed from</span>
    <span class="c1"># genesis.</span>
    <span class="c1"># See https://github.com/ethereum/go-ethereum/pull/1588</span>
    <span class="n">num_bomb_periods</span> <span class="o">=</span> <span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">block_number</span><span class="p">)</span> <span class="o">-</span> <span class="n">BOMB_DELAY_BLOCKS</span><span class="p">)</span> <span class="o">//</span> <span class="mi">100000</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span>
    <span class="k">if</span> <span class="n">num_bomb_periods</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Uint</span><span class="p">(</span>
            <span class="nb">max</span><span class="p">(</span><span class="n">difficulty</span> <span class="o">+</span> <span class="mi">2</span><span class="o">**</span><span class="n">num_bomb_periods</span><span class="p">,</span> <span class="n">GENESIS_DIFFICULTY</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Uint</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">difficulty</span><span class="p">,</span> <span class="n">GENESIS_DIFFICULTY</span><span class="p">))</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../vm/instructions/environment/index.html" class="btn btn-neutral float-left" title="Ethereum Virtual Machine (EVM) Environmental Instructions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../vm/index.html" class="btn btn-neutral float-right" title="Ethereum Virtual Machine (EVM)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Ethereum.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>